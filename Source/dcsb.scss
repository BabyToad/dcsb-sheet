// Dark City, Shining Babel - Character Sheet Styles
// Visual Design: Underground Zine aesthetic
// - Photocopied, hand-annotated, punk
// - High contrast B&W base + neon pink accent
// - Typewriter typography, rubber stamp headers

// =============================================================================
// VARIABLES
// =============================================================================

// Color Palette - Underground Zine
$zine-paper: #f5f5f0;           // Aged photocopy paper
$zine-ink: #1a1a1a;             // High contrast black
$zine-grey: #666666;            // Photocopier grey
$zine-light-grey: #cccccc;      // Faded areas

// Accent - Neon Pink (confirmed)
$zine-accent: #ff1493;

// Status colors (muted, hand-drawn feel)
$status-good: #2d5a27;          // Dark green
$status-warning: #cc7700;       // Orange
$status-danger: #8b0000;        // Dark red

// Typography
$font-typewriter: 'Courier New', Courier, monospace;
$font-header: 'Impact', 'Arial Black', sans-serif;

// Spacing
$spacing-xs: 2px;
$spacing-sm: 4px;
$spacing-md: 8px;
$spacing-lg: 16px;
$spacing-xl: 24px;

// =============================================================================
// BASE STYLES
// =============================================================================

.charsheet {
    font-family: $font-typewriter;
    font-size: 12px;
    color: $zine-ink;
    background: $zine-paper;
    padding: $spacing-lg;
    max-width: 800px;

    // Subtle scan lines (Roll20-safe, no data URLs)
    background-image:
        repeating-linear-gradient(
            0deg,
            transparent,
            transparent 2px,
            rgba(0,0,0,0.01) 2px,
            rgba(0,0,0,0.01) 4px
        );

    // Subtle vignette effect
    box-shadow: inset 0 0 100px rgba(0,0,0,0.05);

    // Reset Roll20 defaults for common elements
    div, span, label, textarea, button, h1, h2, h3 {
        box-sizing: border-box;
    }

    label {
        margin: 0;
        padding: 0;
        color: inherit;
        display: inline-block;
    }

    // ==========================================================================
    // INPUTS - Form field styling
    // ==========================================================================

    input[type="text"],
    input[type="number"],
    textarea,
    select {
        font-family: $font-typewriter;
        font-size: 12px;
        background: transparent;
        border: none;
        border-bottom: 1px dashed $zine-grey;
        padding: $spacing-xs $spacing-sm;
        transition: border-color 0.2s;

        &:focus {
            outline: none;
            border-bottom: 2px solid $zine-accent;
        }

        &::placeholder {
            color: $zine-light-grey;
            font-style: italic;
        }
    }

    textarea {
        border: 1px dashed $zine-grey;
        min-height: 60px;
        resize: vertical;

        &:focus {
            border-color: $zine-accent;
        }
    }

    select {
        border: 1px solid $zine-grey;
        border-radius: 0;
        padding: $spacing-xs;
        cursor: pointer;

        &:focus {
            border-color: $zine-accent;
        }
    }

    // ==========================================================================
    // CHECKBOXES & RADIO - Hand-drawn feel
    // ==========================================================================

    input[type="checkbox"],
    input[type="radio"] {
        appearance: none;
        -webkit-appearance: none;
        width: 14px;
        height: 14px;
        min-width: 14px;
        min-height: 14px;
        max-width: 14px;
        max-height: 14px;
        flex-shrink: 0;
        border: 2px solid $zine-ink;
        cursor: pointer;
        position: relative;
        transition: all 0.1s;
        margin: 0;
        padding: 0;

        &:checked {
            background: $zine-ink;
        }

        &:hover {
            border-color: $zine-accent;
        }
    }

    input[type="radio"] {
        border-radius: 50%;
    }

    // ==========================================================================
    // TYPOGRAPHY
    // ==========================================================================

    h1 {
        font-family: $font-header;
        font-size: 24px;
        text-transform: uppercase;
        letter-spacing: 3px;
        margin: 0;
    }

    h2 {
        font-family: $font-typewriter;
        font-size: 14px;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin: $spacing-md 0 $spacing-sm;
    }

    h3 {
        font-family: $font-typewriter;
        font-size: 12px;
        font-weight: bold;
        text-transform: uppercase;
        margin: $spacing-sm 0;
    }

    h4 {
        font-family: $font-typewriter;
        font-size: 11px;
        font-weight: bold;
        text-transform: uppercase;
        color: $zine-grey;
        margin: $spacing-sm 0;
    }

    // ==========================================================================
    // HEADER - Title block
    // ==========================================================================

    .header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        border-bottom: 4px double $zine-ink;
        padding-bottom: $spacing-md;
        margin-bottom: $spacing-lg;
        position: relative;

        // Staple marks in corners
        &::before,
        &::after {
            content: '';
            position: absolute;
            width: 3px;
            height: 10px;
            background: $zine-grey;
            top: -2px;
        }
        &::before { left: 10px; transform: rotate(-5deg); }
        &::after { right: 10px; transform: rotate(5deg); }
    }

    .title-block {
        .title-main {
            font-family: $font-header;
            font-size: 20px;
            letter-spacing: 2px;
            text-transform: uppercase;

            // Stencil effect
            .title-dark {
                color: $zine-ink;
            }
            .title-comma {
                color: $zine-accent;
                font-weight: bold;
            }
            .title-shining {
                color: $zine-ink;
            }
        }

        .title-sub {
            margin-top: $spacing-xs;

            .dossier-type {
                font-family: $font-typewriter;
                font-size: 10px;
                text-transform: uppercase;
                letter-spacing: 2px;
                padding: 2px 6px;
                border: 1px solid $zine-ink;
                display: inline-block;

                // Rubber stamp effect
                transform: rotate(-1deg);
                background: rgba($zine-paper, 0.9);
            }
        }
    }

    // ==========================================================================
    // TAB NAVIGATION - Folder tabs
    // ==========================================================================

    .tab-nav {
        display: flex;
        gap: $spacing-xs;
    }

    .tab-button {
        font-family: $font-typewriter;
        font-size: 11px;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 1px;
        background: $zine-paper;
        border: 2px solid $zine-ink;
        padding: $spacing-sm $spacing-lg;
        cursor: pointer;
        position: relative;
        transition: all 0.15s;

        // Folder tab shape
        clip-path: polygon(8px 0, 100% 0, 100% 100%, 0 100%, 0 8px);

        &:hover {
            background: $zine-light-grey;
            transform: translateY(-2px);
        }

        .tab-text {
            position: relative;
            z-index: 1;
        }
    }

    .header-controls {
        .edit-toggle {
            font-size: 10px;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            gap: $spacing-xs;
            cursor: pointer;
            color: $zine-grey;
            padding: $spacing-xs $spacing-sm;
            border: 1px solid $zine-grey;
            border-radius: 2px;
            transition: all 0.15s;

            &:hover {
                border-color: $zine-ink;
                color: $zine-ink;
            }
        }
    }

    // ==========================================================================
    // SECTIONS - Paper layers with stamps
    // ==========================================================================

    .section {
        margin-bottom: $spacing-lg;
        padding: $spacing-md;
        position: relative;
        background: $zine-paper;

        // Layered paper shadow
        box-shadow:
            2px 2px 0 rgba(0,0,0,0.05),
            4px 4px 0 rgba(0,0,0,0.03);

        // Dashed border like a form
        border: 1px dashed $zine-grey;

        // Tape mark in corner
        &::before {
            content: '';
            position: absolute;
            top: -3px;
            left: 20px;
            width: 40px;
            height: 12px;
            background: rgba(255, 235, 180, 0.6);
            transform: rotate(-2deg);
            border: 1px solid rgba(0,0,0,0.1);
        }
    }

    .section-header {
        display: flex;
        align-items: center;
        gap: $spacing-md;
        margin-bottom: $spacing-md;
        padding-bottom: $spacing-sm;
        border-bottom: 1px solid $zine-light-grey;
    }

    // Rubber stamp effect for section titles
    .section-stamp {
        font-family: $font-typewriter;
        font-size: 11px;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 2px;
        padding: $spacing-xs $spacing-sm;
        border: 2px solid $zine-ink;
        display: inline-block;
        transform: rotate(-0.5deg);
        position: relative;

        // Ink bleed / stamp imperfection
        &::after {
            content: '';
            position: absolute;
            inset: -1px;
            border: 1px solid rgba($zine-ink, 0.3);
            pointer-events: none;
        }
    }

    // Hand-circled section number
    .section-number {
        font-family: $font-typewriter;
        font-size: 14px;
        font-weight: bold;
        width: 28px;
        height: 28px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;

        // Hand-drawn circle effect
        &::before {
            content: '';
            position: absolute;
            inset: 0;
            border: 2px solid $zine-accent;
            border-radius: 50%;
            transform: rotate(5deg);
        }

        // Second slightly offset circle for hand-drawn feel
        &::after {
            content: '';
            position: absolute;
            inset: 1px;
            border: 1px solid rgba($zine-accent, 0.5);
            border-radius: 50%;
            transform: rotate(-3deg);
        }
    }

    // ==========================================================================
    // TWO-COLUMN LAYOUT
    // ==========================================================================

    .sheet-columns {
        display: grid;
        grid-template-columns: 55% 45%;
        gap: $spacing-lg;
        align-items: start;

        @media (max-width: 700px) {
            grid-template-columns: 1fr;
        }
    }

    .left-column,
    .right-column {
        display: flex;
        flex-direction: column;
        gap: $spacing-md;
    }

    // ==========================================================================
    // ACTION RATINGS - Fakeradio Checkbox Pattern (Inverse Fill)
    // ==========================================================================

    // Attribute blocks (vertical stack in right column)
    .attribute-block {
        margin-bottom: $spacing-sm;
        padding: $spacing-sm;
        border-left: 3px solid $zine-ink;
        background: rgba(0,0,0,0.02);

        .attribute-header-row {
            display: flex;
            align-items: center;
            gap: $spacing-sm;
            margin-bottom: $spacing-sm;

            .attr-name {
                margin: 0;
                font-size: 11px;
                font-weight: bold;
                font-family: $font-typewriter;
                text-transform: uppercase;
                min-width: 55px;
                background: transparent;
                border: none;
                padding: 0;
                cursor: pointer;
                color: $zine-ink;
                text-align: left;
                transition: color 0.15s;

                &:hover {
                    color: $zine-accent;
                }
            }
        }

        .attribute-xp {
            display: flex;
            align-items: center;
            gap: $spacing-xs;
            margin-bottom: $spacing-sm;

            .xp-label {
                font-size: 9px;
                text-transform: uppercase;
                color: $zine-grey;
                min-width: 20px;
            }
        }
    }

    // Attribute rating track (fakeradio inverse-fill)
    .attribute-track {
        display: flex;
        align-items: center;
        gap: 2px;

        .fakeradio.zero {
            display: none;
        }

        .fakeradio {
            display: none;
        }

        .attr-dot {
            width: 12px;
            height: 12px;
            min-width: 12px;
            min-height: 12px;
            max-width: 12px;
            max-height: 12px;
            border: 1px solid $zine-grey;
            border-radius: 1px;
            cursor: pointer;
            display: block;
            flex-shrink: 0;
            flex-grow: 0;
            background: $zine-grey;
            transition: background 0.1s;
            line-height: 0;
            font-size: 0;
            padding: 0;
            margin: 0;
        }

        // Inverse fill: dots AFTER checked become empty
        .fakeradio:checked ~ .fakeradio + .attr-dot {
            background: transparent;
        }
    }

    .action-list {
        display: flex;
        flex-direction: column;
        gap: $spacing-xs;
    }

    // Action row (clickable name + dots)
    .action-row {
        display: flex;
        align-items: center;
        gap: $spacing-sm;

        .action-name {
            width: 75px;
            font-family: $font-typewriter;
            font-size: 10px;
            font-weight: normal;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            text-align: left;
            // Remove button styling
            background: transparent;
            border: none;
            padding: 0;
            margin: 0;
            cursor: pointer;
            color: $zine-ink;
            transition: color 0.15s;

            &:hover {
                color: $zine-accent;
            }
        }

        .action-dots {
            display: flex;
            align-items: center;
            gap: 2px;

            .fakeradio.zero {
                display: none;
            }

            .fakeradio {
                display: none;
            }

            .dot {
                width: 16px;
                height: 16px;
                min-width: 16px;
                min-height: 16px;
                max-width: 16px;
                max-height: 16px;
                border: 2px solid $zine-ink;
                border-radius: 1px;
                display: block;
                cursor: pointer;
                transition: all 0.1s;
                flex-shrink: 0;
                flex-grow: 0;
                background: $zine-ink;
                line-height: 0;
                font-size: 0;
                padding: 0;
                margin: 0;
            }

            // Inverse fill: dots AFTER checked become empty
            .fakeradio:checked ~ .fakeradio + .dot {
                background: transparent;
            }
        }
    }

    // Playbook XP block
    .playbook-xp-block {
        margin-top: $spacing-sm;
        padding: $spacing-sm;
        border: 1px dashed $zine-grey;
        background: rgba(0,0,0,0.02);

        .xp-label-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: $spacing-xs;

            .xp-label {
                font-size: 10px;
                font-weight: bold;
                text-transform: uppercase;
            }

            .xp-trigger-row {
                margin-top: 2px;
            }

            .xp-trigger {
                width: 100%;
                font-size: 9px;
                font-style: italic;
                color: $zine-grey;
                background: transparent;
                border: none;
                border-bottom: 1px dashed $zine-grey;
                padding: 2px 0;
                font-family: $font-typewriter;

                &::placeholder {
                    color: lighten($zine-grey, 20%);
                    font-style: italic;
                }

                &:focus {
                    outline: none;
                    border-bottom-color: $zine-accent;
                }
            }
        }
    }

    // ==========================================================================
    // TRACKERS - Stress, Trauma, Heat, etc.
    // ==========================================================================

    .condition-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: $spacing-md;
    }

    .track-label {
        font-size: 10px;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: $spacing-xs;
    }

    .stress-block,
    .trauma-block {
        margin-bottom: $spacing-sm;
    }

    .stress-track,
    .trauma-track {
        display: flex;
        gap: 2px;

        .stress-box,
        .trauma-box {
            width: 16px;
            height: 16px;
            min-width: 16px;
            min-height: 16px;
            border: 2px solid $zine-ink;
            cursor: pointer;
            transition: all 0.1s;
            flex-shrink: 0;

            // Hand-drawn imperfection
            &:nth-child(odd) {
                transform: rotate(0.5deg);
            }
            &:nth-child(even) {
                transform: rotate(-0.5deg);
            }
        }

        input[type="checkbox"] {
            display: none;

            &:checked + .stress-box,
            &:checked + .trauma-box {
                background: $zine-ink;
                box-shadow: 1px 1px 0 rgba(0,0,0,0.2);
            }
        }
    }

    // Trauma gets X marks
    .trauma-track {
        .trauma-box {
            position: relative;
        }

        input[type="checkbox"]:checked + .trauma-box {
            background: transparent;

            &::before,
            &::after {
                content: '';
                position: absolute;
                width: 2px;
                height: 14px;
                background: $zine-ink;
                top: 50%;
                left: 50%;
            }
            &::before {
                transform: translate(-50%, -50%) rotate(45deg);
            }
            &::after {
                transform: translate(-50%, -50%) rotate(-45deg);
            }
        }
    }

    // ==========================================================================
    // HARM TRACKS
    // ==========================================================================

    .harm-block {
        margin-bottom: $spacing-md;

        &.mental {
            .harm-header {
                border-left: 3px solid $zine-accent;
                padding-left: $spacing-sm;
            }
        }
    }

    .harm-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: $spacing-sm;

        .harm-note {
            font-size: 9px;
            color: $zine-accent;
            font-style: italic;
        }
    }

    .harm-track {
        .harm-level {
            display: flex;
            align-items: center;
            gap: $spacing-sm;
            margin: $spacing-xs 0;
            padding: $spacing-xs 0;
            border-bottom: 1px dotted $zine-light-grey;

            .level-num {
                font-size: 14px;
                font-weight: bold;
                width: 20px;
                text-align: center;
            }

            &.severe .level-num {
                color: $status-danger;
            }

            .text-input {
                flex: 1;
            }
        }
    }

    .healing-clock-wrapper {
        display: flex;
        align-items: center;
        gap: $spacing-sm;

        .clock-label {
            font-size: 9px;
            text-transform: uppercase;
        }
    }

    // Circular clock (4 quadrants)
    .clock-circle {
        position: relative;
        width: 32px;
        height: 32px;
        border-radius: 50%;
        border: 2px solid $zine-ink;
        background: transparent;
        overflow: hidden;

        input[type="checkbox"] {
            display: none;
        }

        .clock-wedge {
            position: absolute;
            width: 50%;
            height: 50%;
            cursor: pointer;
            background: transparent;
            transition: background 0.1s;
            box-sizing: border-box;

            // Position each quadrant
            &[data-segment="1"] {
                top: 0;
                right: 0;
            }
            &[data-segment="2"] {
                bottom: 0;
                right: 0;
            }
            &[data-segment="3"] {
                bottom: 0;
                left: 0;
            }
            &[data-segment="4"] {
                top: 0;
                left: 0;
            }

            &:hover {
                background: rgba($zine-ink, 0.3);
            }
        }

        input[type="checkbox"]:checked + .clock-wedge {
            background: $zine-ink;
        }

        // Cross-hairs for visual division
        &::before,
        &::after {
            content: '';
            position: absolute;
            background: $zine-ink;
            z-index: 1;
            pointer-events: none;
        }
        &::before {
            width: 100%;
            height: 1px;
            top: 50%;
            left: 0;
            transform: translateY(-50%);
        }
        &::after {
            width: 1px;
            height: 100%;
            left: 50%;
            top: 0;
            transform: translateX(-50%);
        }
    }

    // ==========================================================================
    // CLOCKS - Circular segments
    // ==========================================================================

    .clock {
        display: inline-flex;
        align-items: center;

        .clock-segments {
            display: flex;
            gap: 1px;
        }

        .segment {
            width: 16px;
            height: 16px;
            border: 2px solid $zine-ink;
            cursor: pointer;
            transition: background 0.1s;

            // Make them look like pie segments
            &:first-child {
                border-radius: 8px 0 0 8px;
            }
            &:last-child {
                border-radius: 0 8px 8px 0;
            }
        }

        input[type="checkbox"] {
            display: none;

            &:checked + .segment {
                background: $zine-ink;
            }
        }
    }

    // ==========================================================================
    // HEAT GAUGE - Special styling
    // ==========================================================================

    .heat-gauge {
        padding: $spacing-sm;
        border: 2px solid $zine-ink;
        background: repeating-linear-gradient(
            45deg,
            transparent,
            transparent 5px,
            rgba(0,0,0,0.02) 5px,
            rgba(0,0,0,0.02) 10px
        );

        .gauge-label {
            font-size: 10px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: $spacing-xs;
        }

        .gauge-segments {
            display: flex;
            gap: 2px;
            margin-bottom: $spacing-xs;

            .heat-segment {
                width: 24px;
                height: 24px;
                min-width: 24px;
                min-height: 24px;
                border: 2px solid $zine-ink;
                cursor: pointer;
                transition: all 0.15s;
                flex-shrink: 0;
            }

            input[type="checkbox"] {
                display: none;

                &:checked + .heat-segment {
                    background: $status-danger;
                    border-color: $status-danger;
                }
            }
        }

        .gauge-dice {
            font-size: 10px;
            color: $zine-grey;

            .dice-count {
                width: 30px;
                text-align: center;
                font-weight: bold;
                border: none;
                background: transparent;
            }
        }
    }

    // ==========================================================================
    // ARMOR BLOCK
    // ==========================================================================

    .armor-block {
        .armor-track {
            display: flex;
            gap: $spacing-md;
        }

        .armor-checkbox {
            display: flex;
            align-items: center;
            gap: $spacing-xs;
            cursor: pointer;
            font-size: 10px;
            text-transform: uppercase;

            .armor-box {
                width: 14px;
                height: 14px;
                min-width: 14px;
                min-height: 14px;
                border: 2px solid $zine-ink;
                display: inline-block;
                flex-shrink: 0;
            }

            input[type="checkbox"] {
                display: none;

                &:checked + .armor-box {
                    background: $zine-ink;
                }
            }
        }
    }

    // ==========================================================================
    // EQUIPMENT
    // ==========================================================================

    .load-selector {
        margin-bottom: $spacing-sm;

        .load-options {
            display: flex;
            gap: $spacing-md;
        }

        .load-option {
            display: flex;
            align-items: center;
            gap: $spacing-xs;
            cursor: pointer;
            font-size: 10px;

            .load-box {
                width: 12px;
                height: 12px;
                min-width: 12px;
                min-height: 12px;
                border: 2px solid $zine-ink;
                border-radius: 1px;  // Box style
                flex-shrink: 0;
            }

            input[type="radio"] {
                display: none;

                &:checked + .load-box {
                    background: $zine-accent;
                    border-color: $zine-accent;
                }
            }
        }
    }

    .load-tracker {
        font-size: 10px;
        margin-bottom: $spacing-sm;
        color: $zine-grey;

        .load-num {
            width: 25px;
            text-align: center;
            font-weight: bold;
        }
    }

    .equipment-columns {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: $spacing-md;
    }

    .item-checkbox {
        display: flex;
        align-items: center;
        gap: $spacing-xs;
        cursor: pointer;
        font-size: 10px;
        padding: $spacing-xs 0;

        .item-box {
            width: 12px;
            height: 12px;
            min-width: 12px;
            min-height: 12px;
            border: 1px solid $zine-ink;
            flex-shrink: 0;
        }

        input[type="checkbox"] {
            display: none;

            &:checked + .item-box {
                background: $zine-ink;
            }

            &:checked ~ .item-name {
                text-decoration: line-through;
                color: $zine-grey;
            }
        }

        .item-load {
            color: $zine-grey;
            margin-left: auto;
        }
    }

    // ==========================================================================
    // CYBERNETICS
    // ==========================================================================

    .cyber-capacity {
        font-size: 11px;
        margin-bottom: $spacing-sm;
        padding: $spacing-xs $spacing-sm;
        background: rgba(0,0,0,0.03);
        border-left: 3px solid $zine-accent;

        .cyber-used,
        .cyber-max {
            width: 30px;
            text-align: center;
            font-weight: bold;
        }
    }

    .cyber-entry {
        display: grid;
        grid-template-columns: auto 1fr auto;
        gap: $spacing-sm;
        padding: $spacing-sm;
        margin-bottom: $spacing-sm;
        border: 1px dashed $zine-grey;
        align-items: start;

        .cyber-tier select {
            font-size: 10px;
            padding: 2px;
        }

        .cyber-name {
            font-weight: bold;
        }

        .cyber-slots {
            display: flex;
            gap: 2px;

            .slot-box {
                width: 12px;
                height: 12px;
                border: 1px solid $zine-ink;
                cursor: pointer;
            }

            input:checked + .slot-box {
                background: $zine-ink;
            }
        }

        .cyber-desc {
            grid-column: 1 / -1;
            font-size: 10px;
            min-height: 40px;
        }
    }

    // ==========================================================================
    // XP TRACKS
    // ==========================================================================

    .xp-boxes {
        display: flex;
        gap: 2px;

        input[type="checkbox"] {
            display: none;
        }

        .xp-box {
            width: 12px;
            height: 12px;
            min-width: 12px;
            min-height: 12px;
            border: 1px solid $zine-ink;
            cursor: pointer;
            flex-shrink: 0;
        }

        input:checked + .xp-box {
            background: $zine-accent;
            border-color: $zine-accent;
        }
    }

    // ==========================================================================
    // VICE
    // ==========================================================================

    .vice-block {
        .vice-fields {
            display: grid;
            grid-template-columns: auto 1fr 1fr;
            gap: $spacing-sm;
            align-items: end;
        }
    }

    // ==========================================================================
    // CIRCLES (Contacts)
    // ==========================================================================

    .circles-intro {
        font-style: italic;
        color: $zine-grey;
        margin-bottom: $spacing-sm;
        font-size: 11px;
    }

    .contact-entry {
        display: grid;
        grid-template-columns: auto 1fr 2fr;
        gap: $spacing-sm;
        padding: $spacing-xs 0;
        border-bottom: 1px dotted $zine-light-grey;
        align-items: center;

        .contact-status {
            display: flex;
            gap: 2px;

            input[type="radio"] {
                display: none;
            }

            .status-friend,
            .status-neutral,
            .status-rival {
                width: 18px;
                height: 18px;
                min-width: 18px;
                min-height: 18px;
                border: 1px solid $zine-grey;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                font-size: 10px;
                flex-shrink: 0;
            }

            input:checked + .status-friend {
                background: $status-good;
                color: white;
                border-color: $status-good;
            }
            input:checked + .status-neutral {
                background: $zine-grey;
                color: white;
            }
            input:checked + .status-rival {
                background: $status-danger;
                color: white;
                border-color: $status-danger;
            }
        }
    }

    // ==========================================================================
    // NOTES
    // ==========================================================================

    .notes-area {
        width: 100%;
        min-height: 100px;
        font-family: $font-typewriter;
        font-size: 11px;
        line-height: 1.5;
        padding: $spacing-sm;
        border: 1px dashed $zine-grey;
        background: repeating-linear-gradient(
            transparent,
            transparent 18px,
            $zine-light-grey 18px,
            $zine-light-grey 19px
        );
    }

    // ==========================================================================
    // CREW SHEET SPECIFICS
    // ==========================================================================

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: $spacing-md;
    }

    .stat-label {
        font-size: 10px;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: $spacing-xs;
    }

    .tier-selector {
        display: flex;
        gap: 2px;

        .tier-box {
            width: 24px;
            height: 24px;
            border: 2px solid $zine-ink;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
        }

        input:checked + .tier-box {
            background: $zine-ink;
            color: $zine-paper;
        }
    }

    .hold-selector {
        display: flex;
        gap: $spacing-sm;

        .hold-option {
            padding: $spacing-xs $spacing-sm;
            border: 1px solid $zine-ink;
            cursor: pointer;
            font-size: 10px;
            text-transform: uppercase;
        }

        input:checked + .hold-option {
            background: $zine-ink;
            color: $zine-paper;
        }
    }

    .rep-track,
    .heat-track,
    .wanted-track {
        display: flex;
        flex-wrap: wrap;
        gap: 2px;

        .rep-box,
        .heat-box,
        .wanted-box {
            width: 14px;
            height: 14px;
            border: 1px solid $zine-ink;
            cursor: pointer;
        }

        input:checked + .rep-box { background: $zine-ink; }
        input:checked + .heat-box { background: $status-warning; border-color: $status-warning; }
        input:checked + .wanted-box { background: $status-danger; border-color: $status-danger; }
    }

    .vault-boxes {
        display: flex;
        flex-wrap: wrap;
        gap: 2px;

        .vault-box {
            width: 14px;
            height: 14px;
            border: 1px solid $zine-ink;
            cursor: pointer;

            &:nth-child(4n) {
                margin-right: $spacing-xs;
            }
        }

        input:checked + .vault-box {
            background: $status-good;
            border-color: $status-good;
        }
    }

    .coin-warning {
        font-size: 9px;
        color: $status-warning;
        font-style: italic;
    }

    // ==========================================================================
    // UPGRADES
    // ==========================================================================

    .upgrades-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: $spacing-md;
    }

    .upgrade-category {
        h4 {
            border-bottom: 1px solid $zine-grey;
            padding-bottom: $spacing-xs;
            margin-bottom: $spacing-xs;
        }
    }

    .upgrade-checkbox {
        display: flex;
        align-items: center;
        gap: $spacing-xs;
        cursor: pointer;
        font-size: 10px;
        padding: 2px 0;

        .upgrade-box {
            width: 10px;
            height: 10px;
            border: 1px solid $zine-ink;
        }

        input:checked + .upgrade-box {
            background: $zine-ink;
        }

        .upgrade-cost {
            color: $zine-grey;
            margin-left: auto;
        }
    }

    // ==========================================================================
    // COHORTS
    // ==========================================================================

    .cohort-entry {
        padding: $spacing-sm;
        border: 1px dashed $zine-grey;
        margin-bottom: $spacing-sm;

        .cohort-header {
            display: flex;
            gap: $spacing-sm;
            margin-bottom: $spacing-xs;
        }

        .cohort-harm {
            display: flex;
            align-items: center;
            gap: $spacing-xs;
            margin: $spacing-xs 0;

            .harm-label {
                font-size: 10px;
                text-transform: uppercase;
            }

            .harm-box {
                width: 14px;
                height: 14px;
                border: 1px solid $zine-ink;
                cursor: pointer;
            }

            input:checked + .harm-box {
                background: $status-danger;
                border-color: $status-danger;
            }
        }
    }

    // ==========================================================================
    // FACTION STATUS
    // ==========================================================================

    .faction-legend {
        font-size: 9px;
        color: $zine-grey;
        margin-bottom: $spacing-sm;
        display: flex;
        gap: $spacing-md;
    }

    .faction-row {
        display: grid;
        grid-template-columns: 1fr auto;
        gap: $spacing-sm;
        padding: $spacing-xs 0;
        border-bottom: 1px dotted $zine-light-grey;
        align-items: center;

        .status-track {
            display: flex;
            gap: 1px;

            .status-pip {
                width: 16px;
                height: 16px;
                border: 1px solid $zine-grey;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                font-size: 8px;

                &[data-value="-3"],
                &[data-value="-2"],
                &[data-value="-1"] {
                    border-color: $status-danger;
                }
                &[data-value="1"],
                &[data-value="2"],
                &[data-value="3"] {
                    border-color: $status-good;
                }
            }

            input:checked + .status-pip {
                background: $zine-ink;
                color: $zine-paper;
            }
        }
    }

    // ==========================================================================
    // TAB CONTENT VISIBILITY
    // ==========================================================================

    .tab-content {
        display: none;
    }

    // ==========================================================================
    // CLAIMS
    // ==========================================================================

    .claim-entry {
        display: grid;
        grid-template-columns: auto 1fr 1fr;
        gap: $spacing-sm;
        padding: $spacing-xs 0;
        border-bottom: 1px dotted $zine-light-grey;
        align-items: center;

        .claim-check {
            width: 14px;
            height: 14px;
        }
    }

    // ==========================================================================
    // TEXT INPUTS WITH LABELS
    // ==========================================================================

    .text-input,
    .number-input {
        display: flex;
        flex-direction: column;

        .label {
            font-size: 9px;
            text-transform: uppercase;
            color: $zine-grey;
            letter-spacing: 0.5px;
        }

        input, textarea {
            width: 100%;
        }
    }

    .select-field {
        .field-label {
            font-size: 9px;
            text-transform: uppercase;
            color: $zine-grey;
            display: block;
            margin-bottom: 2px;
        }

        select {
            width: 100%;
        }
    }

    // ==========================================================================
    // IDENTITY GRID
    // ==========================================================================

    .identity-grid {
        .identity-row {
            margin-bottom: $spacing-sm;

            &.primary {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: $spacing-md;
            }

            &.classification {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: $spacing-md;
            }

            &.reset-row {
                display: flex;
                align-items: center;
                gap: $spacing-md;
                margin-top: $spacing-md;
                padding-top: $spacing-sm;
                border-top: 1px dashed $zine-grey;
            }
        }
    }

    .reset-btn {
        padding: $spacing-xs $spacing-md;
        font-family: $font-typewriter;
        font-size: 10px;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        background: transparent;
        border: 1px solid $status-warning;
        color: $status-warning;
        cursor: pointer;
        transition: all 0.15s;

        &:hover {
            background: $status-warning;
            color: $zine-paper;
        }
    }

    .reset-hint {
        font-size: 9px;
        font-style: italic;
        color: $zine-grey;
    }

    // ==========================================================================
    // DISENGAGEMENT BUTTON
    // ==========================================================================

    .disengage-btn {
        width: 100%;
        padding: $spacing-sm;
        margin-top: $spacing-sm;
        font-family: $font-typewriter;
        font-size: 11px;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 1px;
        background: $zine-paper;
        border: 2px solid $zine-ink;
        cursor: pointer;
        transition: all 0.15s;

        &:hover {
            background: $zine-ink;
            color: $zine-paper;
        }
    }

} // End .charsheet

// =============================================================================
// TAB SWITCHING (must be outside .charsheet - radio buttons are siblings)
// =============================================================================

.tab-radio {
    position: absolute;
    opacity: 0;
    pointer-events: none;
}

.tab-radio[value="character"]:checked ~ .charsheet .character-content {
    display: block;
}

.tab-radio[value="crew"]:checked ~ .charsheet .crew-content {
    display: block;
}

// Active tab styling with accent underline
.tab-radio[value="character"]:checked ~ .charsheet .tab-nav .tab-button[for="tab_character"],
.tab-radio[value="crew"]:checked ~ .charsheet .tab-nav .tab-button[for="tab_crew"] {
    background: #1a1a1a;
    color: #f5f5f0;

    &::after {
        content: '';
        position: absolute;
        bottom: -4px;
        left: 0;
        right: 0;
        height: 3px;
        background: #ff1493;
    }
}

// =============================================================================
// EDIT MODE (must be outside .charsheet - checkbox is sibling)
// =============================================================================

// Hide the root-level checkbox
.edit-mode-checkbox {
    position: absolute;
    opacity: 0;
    pointer-events: none;
}

// -----------------------------------------------------------------------------
// Display Mode (default - edit checkbox unchecked)
// -----------------------------------------------------------------------------

// Hide edit-only elements and repeating section controls
.charsheet .edit,
.charsheet .repcontrol,
.charsheet .itemcontrol {
    display: none;
}

// -----------------------------------------------------------------------------
// Edit Mode (checkbox checked)
// -----------------------------------------------------------------------------

// Show edit elements, hide display elements
.edit-mode-checkbox:checked ~ .charsheet .edit {
    display: block;
}

.edit-mode-checkbox:checked ~ .charsheet .display {
    display: none;
}

// Show repeating section add/modify/delete buttons
.edit-mode-checkbox:checked ~ .charsheet .repcontrol,
.edit-mode-checkbox:checked ~ .charsheet .itemcontrol {
    display: block;
}

// Visual feedback - accent border when in edit mode
.edit-mode-checkbox:checked ~ .charsheet {
    outline: 2px solid $zine-accent;
    outline-offset: -2px;
}

// Style the edit toggle label to show checked state
.edit-mode-checkbox:checked ~ .charsheet .edit-toggle {
    background: $zine-ink;
    color: $zine-paper;
}

// =============================================================================
// DISPLAY MODE STYLING
// =============================================================================

.charsheet {
    // -----------------------------------------------------------------------------
    // Identity Section Display
    // -----------------------------------------------------------------------------
    .identity-display {
        padding: 0.5rem 0;

        .identity-name-line {
            display: flex;
            align-items: baseline;
            gap: 0.5rem;
            margin-bottom: 0.25rem;
        }

        .char-name {
            font-size: 1.4em;
            font-weight: bold;
            font-family: 'Courier New', Courier, monospace;
        }

        .alias-wrapper {
            font-style: italic;
            color: $zine-grey;
        }

        .quote {
            color: $zine-grey;
        }

        .identity-look {
            font-size: 0.9em;
            margin: 0.25rem 0;
            font-style: italic;
        }

        .identity-classification {
            font-size: 0.85em;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: $zine-grey;

            .sep {
                margin: 0 0.5em;
            }

            .playbook-value {
                color: $zine-accent;
                font-weight: bold;
            }
        }
    }

    // -----------------------------------------------------------------------------
    // Cybernetics Section Display
    // -----------------------------------------------------------------------------
    .cyber-display {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.25rem 0;
        border-bottom: 1px dashed rgba($zine-grey, 0.3);

        .cyber-slots {
            display: flex;
            gap: 2px;
        }

        .cyber-tier-display {
            color: $zine-accent;
            font-weight: bold;
        }

        .cyber-tier-value {
            color: $zine-accent;
            font-weight: bold;
        }

        .cyber-name-display {
            font-weight: bold;
        }
    }

    // -----------------------------------------------------------------------------
    // Abilities Section Display
    // -----------------------------------------------------------------------------
    .ability-entry {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.25rem 0;
    }

    .ability-name-display {
        font-weight: bold;
    }

    // -----------------------------------------------------------------------------
    // Contacts Section Display
    // -----------------------------------------------------------------------------
    .contact-entry {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.25rem 0;
    }

    .contact-name-display {
        font-weight: bold;
    }

    // -----------------------------------------------------------------------------
    // Items Section Display
    // -----------------------------------------------------------------------------
    .item-display {
        display: inline-flex;
        align-items: baseline;
        gap: 0.25rem;

        .item-name-display {
            font-weight: bold;
        }

        .item-load-display,
        .item-load-value {
            font-size: 0.8em;
            color: $zine-grey;
        }
    }

    // -----------------------------------------------------------------------------
    // Harm Section Display
    // -----------------------------------------------------------------------------
    .harm-display {
        .harm-level {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.25rem 0;
            border-bottom: 1px dashed rgba($zine-grey, 0.3);

            &:last-child {
                border-bottom: none;
            }
        }

        .level-num {
            font-weight: bold;
            width: 1.5em;
            text-align: center;
        }

        .harm-value {
            font-style: italic;

            &:empty::before {
                content: '-';
                color: $zine-grey;
            }
        }

        .harm-sep {
            color: $zine-grey;
            margin: 0 0.25rem;
        }
    }

    // -----------------------------------------------------------------------------
    // Vice Section Display
    // -----------------------------------------------------------------------------
    .vice-display {
        padding: 0.25rem 0;

        .vice-type-display {
            font-weight: bold;
            text-transform: capitalize;
        }

        .vice-sep {
            margin-right: 0.5rem;
        }

        .vice-purveyor-display {
            font-style: italic;
        }

        .vice-details-display {
            color: $zine-grey;
            margin-left: 0.5rem;

            &::before {
                content: '- ';
            }

            &:empty::before {
                content: '';
            }
        }
    }

    // -----------------------------------------------------------------------------
    // Trauma Conditions Display
    // -----------------------------------------------------------------------------
    .trauma-conditions-display {
        display: block;
        font-style: italic;
        color: $zine-grey;
        margin-top: 0.25rem;
    }

    // -----------------------------------------------------------------------------
    // Notes Section Display
    // -----------------------------------------------------------------------------
    .notes-display {
        display: block;
        white-space: pre-wrap;
        font-family: 'Courier New', Courier, monospace;
        font-size: 0.9em;
        line-height: 1.4;
        padding: 0.5rem;
        min-height: 3rem;
        background: rgba($zine-grey, 0.05);
        border: 1px dashed rgba($zine-grey, 0.3);
    }
}

// =============================================================================
// ROLL TEMPLATES
// =============================================================================

.sheet-rolltemplate-dcsb-action,
.sheet-rolltemplate-dcsb-fortune,
.sheet-rolltemplate-dcsb-resistance {
    font-family: 'Courier New', Courier, monospace;
    background: #f5f5f0;
    border: 2px solid #1a1a1a;
    padding: 8px;
    margin: 4px 0;

    .rolltemplate-container {
        .rolltemplate-header {
            border-bottom: 1px solid #1a1a1a;
            padding-bottom: 4px;
            margin-bottom: 4px;

            .charname {
                font-weight: bold;
            }

            .title {
                text-transform: uppercase;
                font-size: 11px;
                color: #ff1493;
            }
        }

        .rolltemplate-body {
            .roll-result {
                font-size: 18px;
                font-weight: bold;
            }
        }

        .rolltemplate-footer {
            border-top: 1px solid #666;
            padding-top: 4px;
            margin-top: 4px;
            font-size: 10px;
            color: #666;
        }
    }
}
