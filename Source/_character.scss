// =============================================================================
// CHARACTER - Character sheet specific sections
// =============================================================================

@use 'tokens' as *;
@use 'mixins' as *;

.charsheet {
    // =========================================================================
    // ACTION RATINGS - Fakeradio Checkbox Pattern (Inverse Fill)
    // =========================================================================

    // Attribute blocks (vertical stack in right column)
    .attribute-block {
        margin-bottom: $spacing-sm;
        padding: $spacing-sm;
        border-left: 3px solid $zine-ink;
        background: rgba(0,0,0,0.02);

        .attribute-header-row {
            @include flex-row($spacing-sm);
            margin-bottom: $spacing-sm;

            .attr-name {
                margin: 0;
                font-size: 11px;
                font-weight: bold;
                font-family: $font-typewriter;
                text-transform: uppercase;
                min-width: 55px;
                background: transparent;
                border: none;
                padding: 0;
                cursor: pointer;
                color: $zine-ink;
                text-align: left;
                @include transition(color);

                &:hover {
                    color: $zine-accent;
                }
            }
        }

        .attribute-xp {
            @include flex-row($spacing-xs);
            margin-bottom: $spacing-sm;

            .xp-label {
                @include uppercase-label(9px, $zine-grey, 0.5px);
                font-weight: normal;
                min-width: 20px;
            }
        }
    }

    // Attribute rating track (fakeradio inverse-fill)
    .attribute-track {
        @include flex-row(2px);
        @include fakeradio-hidden();

        .attr-dot {
            @include square-box(12px);
            border: 1px solid $zine-grey;
            border-radius: 1px;
            cursor: pointer;
            display: block;
            flex-grow: 0;
            background: $zine-grey;
            @include transition(background);
            line-height: 0;
            font-size: 0;
            padding: 0;
            margin: 0;
        }

        // Inverse fill: dots AFTER checked become empty
        @include fakeradio-inverse-fill(attr-dot);
    }

    .action-list {
        @include flex-column($spacing-xs);
    }

    // Action row (clickable name + dots)
    .action-row {
        @include flex-row($spacing-sm);

        .action-name {
            width: 75px;
            font-family: $font-typewriter;
            font-size: 10px;
            font-weight: normal;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            text-align: left;
            // Remove button styling
            background: transparent;
            border: none;
            padding: 0;
            margin: 0;
            cursor: pointer;
            color: $zine-ink;
            @include transition(color);

            &:hover {
                color: $zine-accent;
            }
        }

        .action-dots {
            @include flex-row(2px);
            @include fakeradio-hidden();

            .dot {
                @include square-box(16px);
                border: 2px solid $zine-ink;
                border-radius: 1px;
                display: block;
                cursor: pointer;
                @include transition();
                flex-grow: 0;
                background: $zine-ink;
                line-height: 0;
                font-size: 0;
                padding: 0;
                margin: 0;
            }

            // Inverse fill: dots AFTER checked become empty
            @include fakeradio-inverse-fill(dot);
        }
    }

    // Playbook XP block
    .playbook-xp-block {
        margin-top: $spacing-sm;
        padding: $spacing-sm;
        border: 1px dashed $zine-grey;
        background: rgba(0,0,0,0.02);

        .xp-label-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: $spacing-xs;

            .xp-label {
                @include uppercase-label(10px, inherit, 0.5px);
            }

            .xp-trigger-row {
                margin-top: 2px;
            }

            .xp-trigger {
                width: 100%;
                font-size: 9px;
                font-style: italic;
                color: $zine-grey;
                background: transparent;
                border: none;
                border-bottom: 1px dashed $zine-grey;
                padding: 2px 0;
                font-family: $font-typewriter;

                &::placeholder {
                    color: $form-grey-light;
                    font-style: italic;
                }

                &:focus {
                    outline: none;
                    border-bottom-color: $zine-accent;
                }
            }
        }
    }

    // =========================================================================
    // HARM TRACKS
    // =========================================================================

    .harm-block {
        margin-bottom: $spacing-md;

        &.mental {
            .harm-header {
                border-left: 3px solid $zine-accent;
                padding-left: $spacing-sm;
            }
        }
    }

    .harm-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: $spacing-sm;

        .harm-note {
            font-size: 9px;
            color: $zine-accent;
            font-style: italic;
        }
    }

    .harm-track {
        .harm-level {
            @include flex-row($spacing-sm);
            margin: $spacing-xs 0;
            padding: $spacing-xs 0;
            border-bottom: 1px dotted $zine-light-grey;

            .level-num {
                font-size: 14px;
                font-weight: bold;
                width: 20px;
                text-align: center;
            }

            &.severe .level-num {
                color: $status-danger;
            }

            &.moderate .level-num {
                color: $status-warning;
            }

            .text-input {
                flex: 1;
            }
        }
    }

    .healing-clock-wrapper {
        @include flex-row($spacing-sm);

        .clock-label {
            @include uppercase-label(9px, inherit, 0.5px);
            font-weight: normal;
        }
    }

    // =========================================================================
    // ARMOR BLOCK
    // =========================================================================

    .armor-block {
        .armor-track {
            @include flex-row($spacing-md, stretch);
        }

        .armor-checkbox {
            @include flex-row($spacing-xs);
            cursor: pointer;
            font-size: 10px;
            text-transform: uppercase;

            .armor-box {
                @include square-box(14px);
                border: 2px solid $zine-ink;
                display: inline-block;
            }

            input[type="checkbox"] {
                @include hidden-checkbox-base();

                &:checked + .armor-box {
                    @include checkbox-checked-fill($terminal-amber);
                }
            }
        }
    }

    // =========================================================================
    // EQUIPMENT
    // =========================================================================

    .load-selector {
        margin-bottom: $spacing-sm;

        .load-options {
            @include flex-row($spacing-md, stretch);
        }

        .load-option {
            @include flex-row($spacing-xs);
            cursor: pointer;
            font-size: 10px;

            .load-box {
                @include square-box(12px);
                border: 2px solid $zine-ink;
                border-radius: 1px;
            }

            input[type="radio"] {
                @include hidden-checkbox-base();

                &:checked + .load-box {
                    @include checkbox-checked-fill($zine-accent, $zine-accent);
                }
            }
        }
    }

    .load-tracker {
        font-size: 10px;
        margin-bottom: $spacing-sm;
        color: $zine-grey;

        .load-num {
            width: 25px;
            text-align: center;
            font-weight: bold;
        }
    }

    .equipment-columns {
        @include grid(1fr 1fr, $spacing-md);
    }

    .item-checkbox {
        @include flex-row($spacing-xs);
        cursor: pointer;
        font-size: 10px;
        padding: $spacing-xs 0;

        .item-box {
            @include square-box(12px);
            border: 1px solid $zine-ink;
        }

        input[type="checkbox"] {
            @include hidden-checkbox-base();

            &:checked + .item-box {
                @include checkbox-checked-fill($terminal-amber);
            }

            &:checked ~ .item-name {
                text-decoration: line-through;
                color: $zine-grey;
            }
        }

        .item-load {
            color: $zine-grey;
            margin-left: auto;
        }
    }

    // =========================================================================
    // CYBERNETICS
    // =========================================================================

    .cyber-capacity {
        font-size: 11px;
        margin-bottom: $spacing-sm;
        padding: $spacing-xs $spacing-sm;
        background: rgba(0,0,0,0.03);
        border-left: 3px solid $zine-accent;

        .cyber-used,
        .cyber-max {
            width: 30px;
            text-align: center;
            font-weight: bold;
        }
    }

    // =========================================================================
    // VICE
    // =========================================================================

    .vice-block {
        .vice-fields {
            @include grid(auto 1fr 1fr, $spacing-sm);
            align-items: end;
        }
    }

    // =========================================================================
    // CIRCLES (Contacts)
    // =========================================================================

    .circles-intro {
        font-style: italic;
        color: $zine-grey;
        margin-bottom: $spacing-sm;
        font-size: 11px;
    }

    .contact-entry {
        @include grid(auto 1fr 2fr, $spacing-sm);
        padding: $spacing-xs 0;
        border-bottom: 1px dotted $zine-light-grey;
        align-items: center;

        .contact-status {
            @include flex-row(2px, stretch);

            input[type="radio"] {
                @include hidden-checkbox-base();
            }

            .status-friend,
            .status-neutral,
            .status-rival {
                @include square-box(18px);
                border: 1px solid $zine-grey;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                font-size: 10px;
            }

            input:checked + .status-friend {
                @include checkbox-checked-fill($status-good, $status-good);
                color: white;
            }
            input:checked + .status-neutral {
                @include checkbox-checked-fill($zine-grey);
                color: white;
            }
            input:checked + .status-rival {
                @include checkbox-checked-fill($status-danger, $status-danger);
                color: white;
            }
        }
    }

    // =========================================================================
    // NOTES
    // =========================================================================

    .notes-area {
        width: 100%;
        min-height: 100px;
        font-family: $font-typewriter;
        font-size: 11px;
        line-height: 1.5;
        padding: $spacing-sm;
        border: 1px dashed $zine-grey;
        background: repeating-linear-gradient(
            transparent,
            transparent 18px,
            $zine-light-grey 18px,
            $zine-light-grey 19px
        );
    }

    // =========================================================================
    // BUTTONS
    // =========================================================================

    .reset-btn {
        padding: $spacing-xs $spacing-md;
        font-family: $font-typewriter;
        font-size: 10px;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        background: transparent;
        border: 1px solid $status-warning;
        color: $status-warning;
        cursor: pointer;
        @include transition();

        &:hover {
            background: $status-warning;
            color: $zine-paper;
        }
    }

    .reset-hint {
        font-size: 9px;
        font-style: italic;
        color: $zine-grey;
    }

    .disengage-btn {
        width: 100%;
        padding: $spacing-sm;
        margin-top: $spacing-sm;
        font-family: $font-typewriter;
        font-size: 11px;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 1px;
        background: $zine-paper;
        border: 2px solid $zine-ink;
        cursor: pointer;
        @include transition();

        &:hover {
            background: $zine-ink;
            color: $zine-paper;
        }
    }
}
