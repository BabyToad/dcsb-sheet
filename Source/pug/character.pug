//- Dark City, Shining Babel - Character Sheet Content
//- Layout: Two-column with Actions+XP on right
//- Information Architecture: Runner Dossier framing

.sheet-columns
    //- ═══════════════════════════════════════════════════════════════
    //- LEFT COLUMN
    //- ═══════════════════════════════════════════════════════════════
    .left-column

        //- ───────────────────────────────────────────────────────────
        //- SECTION 1: SUBJECT IDENTIFICATION
        //- Framing: Corporate intake form / employee file
        //- ───────────────────────────────────────────────────────────
        .section.identity
            .section-header
                .section-stamp SUBJECT IDENTIFICATION
                .section-number 01

            //- Display mode - compact read-only view
            .display.identity-display
                .identity-name-line
                    span.char-name(name="attr_character_name")
                    span.alias-wrapper
                        span.quote "
                        span.alias-value(name="attr_alias")
                        span.quote "
                .identity-look(name="attr_look")
                .identity-classification
                    span.playbook-value(name="attr_playbook")
                    span.sep |
                    span.heritage-value(name="attr_heritage")
                    span.sep |
                    span.background-value(name="attr_background")

            //- Edit mode - full form
            .edit.identity-grid
                .identity-row.primary
                    +text-input("character_name", "LEGAL_NAME")
                    +text-input("alias", "ALIAS")

                .identity-row.secondary
                    +text-input("look", "PHYSICAL_DESCRIPTION")

                .identity-row.classification
                    .select-field
                        label
                            span.field-label(data-i18n="PLAYBOOK") Playbook
                            select(name="attr_playbook")
                                option(value="") --
                                option(value="face", data-i18n="FACE") Face
                                option(value="fixer", data-i18n="FIXER") Fixer
                                option(value="l337", data-i18n="L337") L337
                                option(value="midnighter", data-i18n="MIDNIGHTER") MidNighter
                                option(value="murk", data-i18n="MURK") Murk
                                option(value="street_warrior", data-i18n="STREET_WARRIOR") Street Warrior

                    .select-field
                        label
                            span.field-label(data-i18n="HERITAGE") Heritage
                            select(name="attr_heritage")
                                option(value="") --
                                option(value="sub_cities", data-i18n="SUB_CITIES") Sub Cities
                                option(value="the_well", data-i18n="THE_WELL") The Well
                                option(value="the_jungle", data-i18n="THE_JUNGLE") The Jungle
                                option(value="the_syndicate", data-i18n="THE_SYNDICATE") The Syndicate
                                option(value="labor_colonies", data-i18n="LABOR_COLONIES") Labor Colonies

                    .select-field
                        label
                            span.field-label(data-i18n="BACKGROUND") Background
                            select(name="attr_background")
                                option(value="") --
                                option(value="entertainment", data-i18n="ENTERTAINMENT") Entertainment
                                option(value="law", data-i18n="LAW") Law
                                option(value="labor", data-i18n="LABOR") Labor
                                option(value="corporate", data-i18n="CORPORATE") Corporate
                                option(value="underworld", data-i18n="UNDERWORLD") Underworld
                                option(value="fringe", data-i18n="FRINGE") Fringe

                .identity-row.reset-row
                    button.reset-btn(type="action", name="act_reset_to_playbook") Reset to Playbook Defaults
                    span.reset-hint Clears items, abilities, and actions

        //- ───────────────────────────────────────────────────────────
        //- SECTION 3: CONDITION REPORT
        //- Framing: Medical chart / trauma assessment
        //- ───────────────────────────────────────────────────────────
        .section.condition
            .section-header
                .section-stamp CONDITION REPORT
                .section-number 03

            .condition-grid
                //- Stress Track
                .stress-block
                    .track-label(data-i18n="STRESS") STRESS
                    .stress-track
                        - for (var i = 1; i <= 9; i++)
                            input(type="checkbox", name=`attr_stress_${i}`, value="1", id=`stress_${i}`)
                            label.stress-box(for=`stress_${i}`)

                //- Trauma Track
                .trauma-block
                    .track-label(data-i18n="TRAUMA") TRAUMA
                    .trauma-track
                        - for (var i = 1; i <= 4; i++)
                            input(type="checkbox", name=`attr_trauma_${i}`, value="1", id=`trauma_${i}`)
                            label.trauma-box(for=`trauma_${i}`)
                    //- Trauma conditions: display/edit modes
                    span.display.trauma-conditions-display(name="attr_trauma_conditions")
                    .edit
                        +text-input("trauma_conditions", "TRAUMA_CONDITIONS")

                //- Harm Track
                .harm-block
                    .harm-header
                        .track-label(data-i18n="HARM") HARM
                        .healing-clock-wrapper
                            span.clock-label(data-i18n="HEALING") Healing
                            .clock-circle(data-segments="4")
                                - for (var i = 1; i <= 4; i++)
                                    input(type="checkbox", name=`attr_healing_${i}`, value="1", id=`healing_seg_${i}`)
                                    label.clock-wedge(for=`healing_seg_${i}`, data-segment=i)

                    //- Display mode - harm as text
                    .display.harm-display
                        .harm-level.severe
                            span.level-num 3
                            span.harm-value(name="attr_harm_3")
                        .harm-level.moderate
                            span.level-num 2
                            span.harm-value(name="attr_harm_2a")
                            span.harm-sep /
                            span.harm-value(name="attr_harm_2b")
                        .harm-level.lesser
                            span.level-num 1
                            span.harm-value(name="attr_harm_1a")
                            span.harm-sep /
                            span.harm-value(name="attr_harm_1b")

                    //- Edit mode - harm as inputs
                    .edit.harm-edit
                        .harm-level.severe
                            span.level-num 3
                            +text-input("harm_3", "HARM_SEVERE")
                        .harm-level.moderate
                            span.level-num 2
                            +text-input("harm_2a", "")
                            +text-input("harm_2b", "")
                        .harm-level.lesser
                            span.level-num 1
                            +text-input("harm_1a", "")
                            +text-input("harm_1b", "")

                //- Armor
                .armor-block
                    .track-label(data-i18n="ARMOR") ARMOR
                    .armor-track
                        label.armor-checkbox
                            input(type="checkbox", name="attr_armor", value="1")
                            span.armor-box
                            span(data-i18n="ARMOR") Armor
                        label.armor-checkbox
                            input(type="checkbox", name="attr_heavy_armor", value="1")
                            span.armor-box
                            span(data-i18n="HEAVY") +Heavy
                        label.armor-checkbox
                            input(type="checkbox", name="attr_special_armor", value="1")
                            span.armor-box
                            span(data-i18n="SPECIAL") Special

        //- ───────────────────────────────────────────────────────────
        //- SECTION 4: AUGMENTATION RECORD
        //- Framing: Tech spec sheet / warranty documentation
        //- ───────────────────────────────────────────────────────────
        .section.cybernetics
            .section-header
                .section-stamp AUGMENTATION RECORD
                .section-number 04

            .cyber-capacity
                span.capacity-label(data-i18n="CAPACITY") Capacity:
                input(type="number", name="attr_cyber_used", value="0", readonly).cyber-used
                span /
                input(type="number", name="attr_cyber_max", value="4").cyber-max

            +repeating("cybernetics")
                .cyber-entry
                    //- Display mode - compact row with slots visible
                    .display.cyber-display
                        .cyber-slots
                            - for (var i = 1; i <= 3; i++)
                                input(type="checkbox", name=`attr_cyber_slot_${i}`, value="1", id=`cyber_slot_${i}`)
                                label.slot-box(for=`cyber_slot_${i}`)
                        span.cyber-tier-display T
                        span.cyber-tier-value(name="attr_cyber_tier")
                        span.cyber-name-display(name="attr_cyber_name")

                    //- Edit mode - full form
                    .edit.cyber-edit
                        .cyber-tier
                            select(name="attr_cyber_tier")
                                option(value="2") T2
                                option(value="3") T3
                                option(value="4") T4
                                option(value="5") T5
                        input(type="text", name="attr_cyber_name", placeholder="Augment Name").cyber-name
                        .cyber-slots
                            - for (var i = 1; i <= 3; i++)
                                input(type="checkbox", name=`attr_cyber_slot_${i}`, value="1", id=`cyber_slot_${i}`)
                                label.slot-box(for=`cyber_slot_${i}`)
                        textarea(name="attr_cyber_desc", placeholder="Description & effects").cyber-desc

        //- ───────────────────────────────────────────────────────────
        //- SECTION 6: SPECIAL ABILITIES
        //- Framing: Classified capabilities / redacted dossier
        //- ───────────────────────────────────────────────────────────
        .section.abilities
            .section-header
                .section-stamp SPECIAL ABILITIES
                .section-number 06

            +repeating("abilities")
                .ability-entry
                    //- Checkbox always visible (interactive during play)
                    input(type="checkbox", name="attr_ability_taken", value="1").ability-check

                    //- Display mode - just the name
                    span.display.ability-name-display(name="attr_ability_name")

                    //- Edit mode - name input and description
                    .edit.ability-edit
                        input(type="text", name="attr_ability_name", placeholder="Ability name").ability-name
                        textarea(name="attr_ability_desc", placeholder="Description").ability-desc

        //- ───────────────────────────────────────────────────────────
        //- SECTION 7: VICE
        //- Framing: Handwritten notes / off-the-record intel
        //- ───────────────────────────────────────────────────────────
        .section.vice
            .section-header
                .section-stamp VICE
                .section-number 07

            .vice-block
                //- Display mode - compact vice summary
                .display.vice-display
                    span.vice-type-display(name="attr_vice_type")
                    span.vice-sep :
                    span.vice-purveyor-display(name="attr_vice_purveyor")
                    span.vice-details-display(name="attr_vice_details")

                //- Edit mode - full form
                .edit.vice-fields
                    .select-field
                        select(name="attr_vice_type")
                            option(value="") --
                            option(value="faith", data-i18n="FAITH") Faith
                            option(value="gambling", data-i18n="GAMBLING") Gambling
                            option(value="luxury", data-i18n="LUXURY") Luxury
                            option(value="obligation", data-i18n="OBLIGATION") Obligation
                            option(value="pleasure", data-i18n="PLEASURE") Pleasure
                            option(value="stupor", data-i18n="STUPOR") Stupor
                            option(value="weird", data-i18n="WEIRD") Weird
                    +text-input("vice_purveyor", "PURVEYOR")
                    +text-input("vice_details", "DETAILS")

        //- ───────────────────────────────────────────────────────────
        //- SECTION 8: CIRCLES
        //- Framing: Contact cards / post-it notes / rolodex
        //- ───────────────────────────────────────────────────────────
        .section.circles
            .section-header
                .section-stamp CIRCLES
                .section-number 08

            .circles-intro(data-i18n="CIRCLES_DESC") "I know a guy..."

            +repeating("contacts")
                .contact-entry
                    //- Status radios always visible (small, useful in play)
                    .contact-status
                        input(type="radio", name="attr_contact_relation", value="friend", id="contact_friend")
                        label(for="contact_friend").status-friend ✓
                        input(type="radio", name="attr_contact_relation", value="neutral", checked, id="contact_neutral")
                        label(for="contact_neutral").status-neutral ○
                        input(type="radio", name="attr_contact_relation", value="rival", id="contact_rival")
                        label(for="contact_rival").status-rival ✗

                    //- Display mode - just the name
                    span.display.contact-name-display(name="attr_contact_name")

                    //- Edit mode - name and description inputs
                    .edit.contact-edit
                        input(type="text", name="attr_contact_name", placeholder="Name").contact-name
                        input(type="text", name="attr_contact_desc", placeholder="Description / usefulness").contact-desc

        //- ───────────────────────────────────────────────────────────
        //- SECTION 9: NOTES
        //- Framing: Margin scrawl / personal annotations
        //- ───────────────────────────────────────────────────────────
        .section.notes
            .section-header
                .section-stamp NOTES
                .section-number 09

            //- Display mode - read-only text
            span.display.notes-display(name="attr_notes")

            //- Edit mode - textarea
            textarea.edit.notes-area(name="attr_notes", placeholder="Personal notes, background details, mission logs...")

    //- ═══════════════════════════════════════════════════════════════
    //- RIGHT COLUMN
    //- ═══════════════════════════════════════════════════════════════
    .right-column

        //- ───────────────────────────────────────────────────────────
        //- SECTION 2: CAPABILITY ASSESSMENT
        //- Framing: Psychometric evaluation / skills matrix
        //- Actions grouped by attribute with integrated XP
        //- ───────────────────────────────────────────────────────────
        .section.actions
            .section-header
                .section-stamp CAPABILITY ASSESSMENT
                .section-number 02

            //- Playbook XP (at top of section)
            .playbook-xp-block
                .xp-label-row
                    span.xp-label(data-i18n="PLAYBOOK_XP") Playbook XP
                .xp-trigger-row
                    input.xp-trigger(type="text", name="attr_xp_trigger", readonly, placeholder="Select a playbook...")
                +xp-track("playbook", 8)

            //- ACUITY Attribute Block
            .attribute-block.acuity
                .attribute-header-row
                    button.attr-name(type="action", name="act_roll_acuity_resist", data-i18n="ACUITY") ACUITY
                    +attribute-track("acuity")
                .attribute-xp
                    span.xp-label XP
                    +xp-track("acuity", 6)
                .action-list
                    +action-row("hack", "HACK")
                    +action-row("recon", "RECON")
                    +action-row("scrutinize", "SCRUTINIZE")
                    +action-row("tamper", "TAMPER")

            //- GRIT Attribute Block
            .attribute-block.grit
                .attribute-header-row
                    button.attr-name(type="action", name="act_roll_grit_resist", data-i18n="GRIT") GRIT
                    +attribute-track("grit")
                .attribute-xp
                    span.xp-label XP
                    +xp-track("grit", 6)
                .action-list
                    +action-row("brawl", "BRAWL")
                    +action-row("hunt", "HUNT")
                    +action-row("skulk", "SKULK")
                    +action-row("vandalize", "VANDALIZE")

            //- RESOLVE Attribute Block
            .attribute-block.resolve
                .attribute-header-row
                    button.attr-name(type="action", name="act_roll_resolve_resist", data-i18n="RESOLVE") RESOLVE
                    +attribute-track("resolve")
                .attribute-xp
                    span.xp-label XP
                    +xp-track("resolve", 6)
                .action-list
                    +action-row("consort", "CONSORT")
                    +action-row("dominate", "DOMINATE")
                    +action-row("finesse", "FINESSE")
                    +action-row("sway", "SWAY")

        //- ───────────────────────────────────────────────────────────
        //- SECTION 5: EQUIPMENT MANIFEST
        //- Framing: Quartermaster checklist / gear loadout
        //- ───────────────────────────────────────────────────────────
        .section.equipment
            .section-header
                .section-stamp EQUIPMENT MANIFEST
                .section-number 05

            .load-selector
                .load-label(data-i18n="LOAD") LOAD
                .load-options
                    label.load-option
                        input(type="radio", name="attr_load", value="3")
                        span.load-box
                        span(data-i18n="LIGHT") Light (3)
                    label.load-option
                        input(type="radio", name="attr_load", value="5", checked)
                        span.load-box
                        span(data-i18n="NORMAL") Normal (5)
                    label.load-option
                        input(type="radio", name="attr_load", value="6")
                        span.load-box
                        span(data-i18n="HEAVY") Heavy (6)

            .load-tracker
                span.load-current(data-i18n="CURRENT") Current:
                input(type="number", name="attr_load_current", value="0", readonly).load-num
                span /
                input(type="number", name="attr_load_max", value="5", readonly).load-num

            .equipment-columns
                .equipment-column.standard
                    h4(data-i18n="STANDARD_ITEMS") Standard Items
                    +item-checkbox("item_blade", "Blade or club", 1)
                    +item-checkbox("item_pistol", "Pistol", 1)
                    +item-checkbox("item_ammo", "Extra ammo", 1)
                    +item-checkbox("item_armor", "Armor", 2)
                    +item-checkbox("item_heavy", "+Heavy", 3)
                    +item-checkbox("item_tools", "Burglary tools", 1)
                    +item-checkbox("item_climbing", "Climbing gear", 2)
                    +item-checkbox("item_documents", "Documents", 1)

                .equipment-column.playbook
                    h4(data-i18n="PLAYBOOK_ITEMS") Playbook Items
                    +repeating("items")
                        .item-entry
                            //- Checkbox always visible (toggled during play)
                            input(type="checkbox", name="attr_item_carried", value="1").item-carried

                            //- Display mode - name and load as text
                            .display.item-display
                                span.item-name-display(name="attr_item_name")
                                span.item-load-display (
                                span.item-load-value(name="attr_item_load")
                                span.item-load-display )

                            //- Edit mode - editable inputs
                            .edit.item-edit
                                input(type="text", name="attr_item_name", placeholder="Item name")
                                input(type="number", name="attr_item_load", value="1", min="0", max="6")
