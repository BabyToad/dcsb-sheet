//- Dark City, Shining Babel - Crew Sheet Content
//- Layout: Two-column with Identity/Stats/Operations/Notes on left, Upgrades/Abilities/Cohorts/Claims on right
//- Information Architecture: Gang Dossier framing

.sheet-columns
    //- ═══════════════════════════════════════════════════════════════
    //- LEFT COLUMN - Identity, Stats, Score Tracker, Notes
    //- ═══════════════════════════════════════════════════════════════
    .left-column

        //- ───────────────────────────────────────────────────────────
        //- SECTION 1: CREW IDENTIFICATION
        //- Framing: Corporate registration / syndicate charter
        //- ───────────────────────────────────────────────────────────
        .section.crew-identity
            .section-header
                .section-stamp CREW IDENTIFICATION
                .section-number 01

            .crew-id-grid
                .crew-primary
                    +text-input("crew_name", "CREW_NAME")

                .crew-classification
                    .select-field
                        label
                            span.field-label(data-i18n="CREW_TYPE") Crew Type
                            select(name="attr_crew_type")
                                option(value="") --
                                option(value="firebrands", data-i18n="FIREBRANDS") Firebrands
                                option(value="leeches", data-i18n="LEECHES") Leeches
                                option(value="runners", data-i18n="RUNNERS") Runners
                                option(value="zokus", data-i18n="ZOKUS") Zokus

                    .text-field
                        label
                            span.field-label(data-i18n="REPUTATION") Reputation
                            input(type="text", name="attr_reputation", list="reputation_list", placeholder="Ambitious, Brutal, etc.")
                            datalist#reputation_list
                                option(value="Ambitious")
                                option(value="Brutal")
                                option(value="Flashy")
                                option(value="Mercenary")
                                option(value="Savvy")
                                option(value="Strange")

                .crew-location
                    +text-input("hunting_grounds", "HUNTING_GROUNDS")
                    +text-input("lair", "LAIR")

        //- ───────────────────────────────────────────────────────────
        //- SECTION 2: CREW STATS
        //- Framing: Performance metrics / syndicate standing
        //- ───────────────────────────────────────────────────────────
        .section.crew-stats
            .section-header
                .section-stamp CREW STATS
                .section-number 02

            .stats-grid
                //- Row 1: Tier and Hold
                .stats-row.tier-hold-row
                    .tier-block
                        .stat-label(data-i18n="TIER") TIER
                        .tier-selector
                            - for (var i = 0; i <= 4; i++)
                                input(type="radio", name="attr_crew_tier", value=i, checked=(i === 0), id=`tier_${i}`)
                                label.tier-box(for=`tier_${i}`)= i

                    .hold-block
                        .stat-label(data-i18n="HOLD") HOLD
                        .hold-selector
                            input(type="radio", name="attr_hold", value="weak", id="hold_weak")
                            label.hold-option(for="hold_weak", data-i18n="WEAK") Weak
                            input(type="radio", name="attr_hold", value="strong", checked, id="hold_strong")
                            label.hold-option(for="hold_strong", data-i18n="STRONG") Strong

                //- Row 2: Rep Track (12 boxes) - forward fill
                .stats-row.rep-row
                    .rep-block
                        .stat-label(data-i18n="REP") REP
                        .rep-track
                            +fakeradio-track("rep", 12, "rep-box")

                //- Row 3: Heat and Wanted - forward fill
                .stats-row.heat-wanted-row
                    .heat-block
                        .stat-label(data-i18n="HEAT") HEAT
                        .heat-track
                            +fakeradio-track("heat", 9, "heat-box")

                    .wanted-block
                        .stat-label(data-i18n="WANTED") WANTED
                        .wanted-track
                            +fakeradio-track("wanted", 4, "wanted-box")

                //- Row 4: Vault Track (16 boxes) - forward fill
                .stats-row.vault-row
                    .vault-block
                        .stat-label(data-i18n="VAULT") VAULT
                        .vault-track
                            +fakeradio-track("vault", 16, "vault-box")

                //- Row 5: Crew Advancement (Deep Cuts)
                .stats-row.advancement-row
                    .crew-advancement-block
                        .stat-label ADVANCEMENT
                        .crew-advancement-clocks
                            .adv-row
                                .adv-clock
                                    +fakeradio-track("crew_adv_clock_1", 6, "crew-adv-segment")
                                .adv-clock
                                    +fakeradio-track("crew_adv_clock_2", 6, "crew-adv-segment")
                            .adv-row
                                .adv-clock
                                    +fakeradio-track("crew_adv_clock_3", 6, "crew-adv-segment")
                                .adv-clock
                                    +fakeradio-track("crew_adv_clock_4", 6, "crew-adv-segment")
                        .crew-advancement-costs
                            .cost-row
                                span.cost-label Crew Upgrade
                                span.cost-value 1
                            .cost-row
                                span.cost-label Crew Ability
                                span.cost-value 2

        //- ───────────────────────────────────────────────────────────
        //- SECTION 3: SCORE TRACKER (Heat Gauge)
        //- Framing: Mission control / tactical display
        //- ───────────────────────────────────────────────────────────
        .section.score-tracker
            .section-header
                .section-stamp SCORE TRACKER
                .section-number 03

            .score-grid
                //- Heat Gauge (6 segments - for active scores)
                +heat-gauge("score_heat")

                //- Score roll buttons
                .score-buttons
                    button(type="action", name="act_engagement_roll").score-btn
                        span(data-i18n="ROLL_ENGAGEMENT") Roll Engagement
                    button(type="action", name="act_disengage_roll").score-btn
                        span(data-i18n="ROLL_DISENGAGEMENT") Roll Disengagement

        //- ───────────────────────────────────────────────────────────
        //- SECTION 4: CREW NOTES
        //- Framing: Mission logs / operational notes
        //- ───────────────────────────────────────────────────────────
        .section.crew-notes
            .section-header
                .section-stamp CREW NOTES
                .section-number 04

            textarea(name="attr_crew_notes", placeholder="Mission logs, ongoing operations, crew history...").notes-area

        //- ───────────────────────────────────────────────────────────
        //- SECTION 5: CLOCKS
        //- Framing: Mission tracking / faction progress timers
        //- Custom progress clocks with configurable sizes (4, 6, 8, 10, 12)
        //- ───────────────────────────────────────────────────────────
        .section.crew-clocks
            +section-header-editable("crewclocks", "CLOCKS", "05")

            +repeating("crewclocks")
                +clock-entry()

        //- ───────────────────────────────────────────────────────────
        //- SECTION 6: CREW CONTACTS
        //- Framing: Network contacts based on crew type
        //- Pattern: Mirrors Friends & Rivals from character sheet
        //- ───────────────────────────────────────────────────────────
        .section.crew-contacts
            +section-header-editable("crewcontacts", "CREW CONTACTS", "06")

            .contacts-intro Select a Favored Contact

            .contacts-list
                //- 6 fixed contact slots (populated from crew type data)
                - for (var i = 1; i <= 6; i++)
                    .contact-card
                        //- Relation selector: star (favored), circle (neutral)
                        .contact-relation
                            label.relation-option.relation-favored(title="Favored")
                                input(type="radio", name=`attr_crew_contact_${i}_relation`, value="favored")
                                span.relation-badge ★
                            label.relation-option.relation-neutral(title="Neutral")
                                input(type="radio", name=`attr_crew_contact_${i}_relation`, value="neutral", checked)
                                span.relation-badge ○

                        //- Display mode
                        .contact-display.display
                            span.contact-name(name=`attr_crew_contact_${i}_name`)
                            span.contact-desc(name=`attr_crew_contact_${i}_desc`)

                        //- Edit mode
                        .contact-edit.edit
                            input.contact-name-input(type="text", name=`attr_crew_contact_${i}_name`, placeholder="Contact name")
                            input.contact-desc-input(type="text", name=`attr_crew_contact_${i}_desc`, placeholder="Role / description")

    //- ═══════════════════════════════════════════════════════════════
    //- RIGHT COLUMN - Upgrades, Abilities, Cohorts, Claims
    //- ═══════════════════════════════════════════════════════════════
    .right-column

        //- ───────────────────────────────────────────────────────────
        //- SECTION 7: CREW UPGRADES
        //- Framing: Asset manifest / resource allocation
        //- ───────────────────────────────────────────────────────────
        .section.crew-upgrades
            .section-header
                .section-stamp CREW UPGRADES
                .section-number 07

            .upgrades-grid
                //- Lair Upgrades
                .upgrade-category.lair
                    h4(data-i18n="LAIR") Lair
                    .upgrade-list
                        +upgrade-multi("lair_rides", "Rides", 2)
                        +upgrade-multi("lair_specialty", "Specialty Transport", 2)
                        +upgrade-checkbox("lair_hidden", "Hidden")
                        +upgrade-checkbox("lair_quarters", "Quarters")
                        +upgrade-multi("lair_secure", "Secure", 2)
                        +upgrade-multi("lair_encryption", "BC Encryption", 2)
                        +upgrade-checkbox("lair_workshop", "Workshop")

                //- Training Upgrades
                .upgrade-category.training
                    h4(data-i18n="TRAINING") Training
                    .upgrade-list
                        +upgrade-checkbox("train_acuity", "Acuity")
                        +upgrade-checkbox("train_grit", "Grit")
                        +upgrade-checkbox("train_resolve", "Resolve")
                        +upgrade-checkbox("train_personal", "Personal")
                        +upgrade-multi("train_mastery", "Mastery", 4)

                //- Quality Upgrades
                .upgrade-category.quality
                    h4(data-i18n="QUALITY") Quality
                    .upgrade-list
                        +upgrade-checkbox("qual_documents", "Documents")
                        +upgrade-checkbox("qual_gear", "Gear")
                        +upgrade-checkbox("qual_implements", "Implements")
                        +upgrade-checkbox("qual_supplies", "Supplies")
                        +upgrade-checkbox("qual_tools", "Tools")
                        +upgrade-checkbox("qual_weapons", "Weapons")

                //- Cohort Upgrades
                .upgrade-category.cohorts
                    h4 Cohorts
                    .upgrade-list
                        +upgrade-multi("cohort_new", "New Cohort", 4)
                        +upgrade-multi("cohort_type", "Add Type", 4)

        //- ───────────────────────────────────────────────────────────
        //- SECTION 8: CREW TYPE UPGRADES
        //- Framing: Crew-specific special upgrades
        //- Populated dynamically based on crew type
        //- ───────────────────────────────────────────────────────────
        .section.crew-type-upgrades
            +section-header-editable("crewtypeupgrades", "CREW TYPE UPGRADES", "08")

            +repeating("crewtypeupgrades")
                .upgrade-entry
                    //- Hidden checkboxes to control box visibility (set by sheet worker)
                    //- Using checkboxes because Roll20 properly updates :checked state
                    input.upgrade-show-lvl2(type="checkbox", name="attr_upgrade_show_2", value="1")
                    input.upgrade-show-lvl3(type="checkbox", name="attr_upgrade_show_3", value="1")

                    //- Level track (up to 3 checkboxes for multi-level upgrades)
                    .upgrade-track
                        label.upgrade-box-label.level-1
                            input(type="checkbox", name="attr_upgrade_level_1", value="1")
                            span.upgrade-box
                        label.upgrade-box-label.level-2
                            input(type="checkbox", name="attr_upgrade_level_2", value="1")
                            span.upgrade-box
                        label.upgrade-box-label.level-3
                            input(type="checkbox", name="attr_upgrade_level_3", value="1")
                            span.upgrade-box

                    //- Content
                    .upgrade-content
                        .display.upgrade-display
                            span.upgrade-name-display(name="attr_upgrade_name")
                            span.upgrade-desc-display(name="attr_upgrade_desc")
                        .edit.upgrade-edit
                            input(type="text", name="attr_upgrade_name", placeholder="Upgrade name").upgrade-name-input
                            input(type="text", name="attr_upgrade_desc", placeholder="Description").upgrade-desc-input

        //- ───────────────────────────────────────────────────────────
        //- SECTION 9: CREW ABILITIES
        //- Framing: Special operations / classified capabilities
        //- Pattern: Matches augments section
        //- ───────────────────────────────────────────────────────────
        .section.crew-abilities
            +section-header-editable("crewabilities", "CREW ABILITIES", "09")

            +repeating("crewabilities")
                .ability-entry
                    //- Taken checkbox - standard Roll20 pattern: input inside label
                    label.ability-taken
                        input.ability-check(type="checkbox", name="attr_crew_ability_taken", value="1")
                        span.taken-box

                    //- Content wrapper
                    .ability-content
                        //- Display mode - shows name and description
                        .display.ability-display
                            .ability-header-display
                                span.ability-name-display(name="attr_crew_ability_name")
                            span.ability-desc-display(name="attr_crew_ability_desc")

                        //- Edit mode - editable inputs
                        .edit.ability-edit
                            input(type="text", name="attr_crew_ability_name", placeholder="Ability name").ability-name-input
                            textarea(name="attr_crew_ability_desc", placeholder="Description & effects").ability-desc-input

        //- ───────────────────────────────────────────────────────────
        //- SECTION 10: COHORTS
        //- Framing: Personnel files / asset registry
        //- ───────────────────────────────────────────────────────────
        .section.cohorts
            +section-header-editable("cohorts", "COHORTS", "10")

            +repeating("cohorts")
                +cohort-block()

        //- ───────────────────────────────────────────────────────────
        //- SECTION 11: CLAIMS / TERRITORY
        //- Framing: Territory map / sphere of influence
        //- ───────────────────────────────────────────────────────────
        .section.claims
            .section-header
                .section-stamp CLAIMS
                .section-number 11

            +repeating("claims")
                .claim-entry
                    input(type="checkbox", name="attr_claim_held", value="1").claim-check
                    input(type="text", name="attr_claim_name", placeholder="Claim name").claim-name
                    input(type="text", name="attr_claim_benefit", placeholder="Benefit").claim-benefit
