// =============================================================================
// LAYOUT - Columns, grids, sections
// =============================================================================

@use 'tokens' as *;
@use 'mixins' as *;

.charsheet {
    // =========================================================================
    // TWO-COLUMN LAYOUT
    // =========================================================================

    .sheet-columns {
        @include grid(55% 45%, $spacing-lg);
        align-items: start;

        @media (max-width: 700px) {
            grid-template-columns: 1fr;
        }
    }

    .left-column,
    .right-column {
        @include flex-column($spacing-md);
    }

    // =========================================================================
    // SECTIONS - Paper layers with stamps
    // =========================================================================

    .section {
        @include section-block();
    }

    // Section header with box-drawing border (ANSI terminal aesthetic)
    .section-header {
        @include flex-row($space-3);
        margin-bottom: $space-3;
        padding: $space-2 $space-3;
        position: relative;
        font-family: $font-mono;

        // Box-drawing border using ::before for top line
        &::before {
            content: '┌──────────────────────────────────────────────────┐';
            position: absolute;
            top: -2px;
            left: 0;
            right: 0;
            font-family: $font-mono;
            font-size: $type-sm;
            color: $form-grey;
            letter-spacing: -1px;
            overflow: hidden;
            white-space: nowrap;
        }

        // Box-drawing border using ::after for bottom line
        &::after {
            content: '└──────────────────────────────────────────────────┘';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            font-family: $font-mono;
            font-size: $type-sm;
            color: $form-grey;
            letter-spacing: -1px;
            overflow: hidden;
            white-space: nowrap;
        }
    }

    // Section title text (inside box-drawing frame)
    .section-stamp {
        @include uppercase-label($type-sm, $form-ink, 1px);
        font-family: $font-mono;
        flex-grow: 1;
    }

    // Hand-circled section number (reclamation layer - human annotation)
    .section-number {
        font-family: $font-mono;
        font-size: $type-md;
        font-weight: bold;
        color: $terminal-amber;
        @include square-box(28px, false);
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;

        // Hand-drawn circle effect (in amber - human annotation over corporate form)
        &::before {
            content: '';
            position: absolute;
            inset: 0;
            border: 2px solid $terminal-amber;
            border-radius: 50%;
            transform: rotate(5deg);
        }

        // Second slightly offset circle for hand-drawn feel
        &::after {
            content: '';
            position: absolute;
            inset: 1px;
            border: 1px solid rgba($terminal-amber, 0.5);
            border-radius: 50%;
            transform: rotate(-3deg);
        }
    }

    // =========================================================================
    // TAB CONTENT
    // =========================================================================

    .tab-content {
        display: none;
    }

    // =========================================================================
    // IDENTITY GRID
    // =========================================================================

    .identity-grid {
        .identity-row {
            margin-bottom: $spacing-sm;

            &.primary {
                @include grid(1fr 1fr, $spacing-md);
            }

            &.classification {
                @include grid(repeat(3, 1fr), $spacing-md);
            }

            &.vice-row {
                @include grid(1fr 1fr 1fr, $spacing-md);
                margin-top: $spacing-sm;
                padding-top: $spacing-sm;
                border-top: 1px dashed $zine-grey;
            }

            &.reset-row {
                @include flex-row($spacing-md);
                margin-top: $spacing-md;
                padding-top: $spacing-sm;
                border-top: 1px dashed $zine-grey;
            }
        }
    }

    // Vice action button (always visible)
    .vice-action {
        @include flex-row($spacing-sm);
        margin-top: $spacing-sm;
        padding: $spacing-sm;
        background: rgba($form-ink, 0.03);
        border-left: 3px solid $terminal-amber;
    }
}
